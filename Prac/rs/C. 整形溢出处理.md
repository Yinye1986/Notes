# debug 阶段

如果直接使用普通运算符, 并发生溢出, 程序会panic

# release 阶段

使用 --release 参数进行 release 模式构建时，Rust 不检测溢出。相反，当检测到整型溢出时，Rust 会按照补码循环溢出（two’s complement wrapping）的规则处理。

程序不会 panic，但是该变量的值可能不是你期望的值。依赖这种默认行为的代码都应该被认为是错误的代码。

# 如何平衡使用普通运算符还是特殊方法

默认信任，但要验证：默认使用 +, - 等运算符。相信你的 debug 构建会在出现问题时告诉你。

分析风险点：特别关注那些处理外部输入、不受信任数据或循环累加的代码。这些地方是溢出的高发区。

精确打击，而非地毯式轰炸：只在你分析后认为确实存在需要优雅处理的溢出风险的地方，才用 checked_*, saturating_*, wrapping_* overflowing_*等方法替换掉普通运算符。

优先选择修复逻辑或更换类型：当 panic 发生时，首先考虑是不是你的程序设计或数据类型选择有问题。修复根本原因通常比“打补丁”式地处理溢出更好。
