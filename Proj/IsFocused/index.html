<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>焦点检测测试</title>
    <style>
        /* 让页面内容居中，看起来更清晰 */
        body {
            display: grid;
            place-items: center;
            min-height: 100vh;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            text-align: center;
            margin: 0;
            background-color: #f0f0f0;
        }
        #status-display {
            font-size: 4rem;
            font-weight: bold;
            transition: color 0.3s; /* 颜色变化时有过渡动画 */
        }
    </style>
</head>
<body>

    <div>
        <h1 id="status-display"></h1>
        <p>请尝试点击浏览器窗口外部（例如桌面、任务栏），然后再点回本页面。</p>
    </div>

    <script>
        // 获取到那个 h1 元素
        const statusDisplay = document.getElementById('status-display');

        // 定义一个函数，用来更新显示的状态
        function updateFocusStatus() {
            // document.hasFocus() 会返回 true 或 false，表示页面当前是否有焦点
            if (document.hasFocus()) {
                statusDisplay.textContent = 'focused';
                statusDisplay.style.color = 'green';
            } else {
                statusDisplay.textContent = 'Not Focused (blurred)';
                statusDisplay.style.color = 'red';
            }
        }

        // -----------------------------------------------------
        // 关键代码：
        // -----------------------------------------------------

        // 1. 监听 'focus' 事件：当窗口获得焦点时触发
        window.addEventListener('focus', updateFocusStatus);

        // 2. 监听 'blur' 事件：当窗口失去焦点时触发
        window.addEventListener('blur', updateFocusStatus);

        // 3. 立即运行一次：确保页面刚加载时就显示正确的初始状态
        updateFocusStatus();

    </script>

</body>
</html>
