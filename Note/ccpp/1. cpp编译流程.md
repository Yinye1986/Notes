# 生成 纯C文件(文本)

```shell
g++ -E src/example.cpp -I inc -o example.ii
```

内部组件`cpp`自动将.cpp及其.hpp处理为.ii文件

但是项目编译中通常不会单独进行这一步

# 生成汇编源码(汇编)

```shell
# 从 .ii 到 .s
g++ -S example.ii -o example.s
# 从 .cpp & .hpp 到 .s
g++ -S src/example.cpp -I inc
```

前端调用了`cc1plus`将.ii处理.s

# 生成目标文件(机器码)

```shell
# 从 .s 到 .o
g++ -c example.s -o example.o
# 从 .cpp & .hpp 到 .o
g++ -c example.cpp -o example.o
```

使用汇编器`as`将.i文件转化成可以执行的目标代码.o

# 生成可执行文件(二进制)

```shell
ld \
  /usr/lib/gcc/x86_64-pc-linux-gnu/15.2.1/crtbegin.o \
  /usr/lib/gcc/x86_64-pc-linux-gnu/15.2.1/crtend.o \
  /usr/lib/crt1.o \
  /usr/lib/crti.o \
  /usr/lib/crtn.o \
  example.o modbusTCP.o \
  -L/usr/lib/gcc/x86_64-pc-linux-gnu/15.2.1 \
  -L /usr/lib \
  --dynamic-linker /lib64/ld-linux-x86_64.so.2 \
  -lc \
  -lstdc++ \
  -lm \
  -lgcc_s \
  -lpthread \
  -o exe
```

使用链接器`ld`将.o文件链接为可执行文件

```shell
g++ example.o modbusTCP.o -o exefile
```

简化使用

# Tips

c的流程与以上相似, 部分工具不同, 部分依赖不同
